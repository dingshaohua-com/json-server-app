<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON Server API</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Noto Sans SC', 'system-ui', 'sans-serif'],
            mono: ['JetBrains Mono', 'Fira Code', 'monospace']
          }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    @keyframes pulse-dot { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .animate-pulse-dot { animation: pulse-dot 2s infinite; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-slate-200 font-sans">
  
  <!-- èƒŒæ™¯è£…é¥° -->
  <div class="fixed inset-0 pointer-events-none">
    <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"></div>
    <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"></div>
  </div>

  <div class="relative z-10 max-w-4xl mx-auto px-6 py-16">
    
    <!-- Header -->
    <header class="text-center mb-16">
      <div class="inline-flex items-center gap-3 mb-5">
        <div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-2xl shadow-lg shadow-blue-500/30">
          { }
        </div>
        <h1 class="text-4xl font-bold bg-gradient-to-r from-white to-slate-400 bg-clip-text text-transparent">
          JSON Server
        </h1>
      </div>
      <p class="text-slate-500 text-lg">é›¶ä»£ç  Â· å¿«é€Ÿæ­å»º REST API æ¨¡æ‹ŸæœåŠ¡å™¨</p>
      <div class="inline-flex items-center gap-2 mt-6 px-4 py-2 bg-green-500/10 border border-green-500/30 text-green-400 rounded-full text-sm">
        <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse-dot"></span>
        æœåŠ¡è¿è¡Œä¸­
      </div>
    </header>

    <!-- å¯ç”¨èµ„æº -->
    <section class="bg-white/5 border border-white/10 rounded-2xl p-8 mb-6 backdrop-blur">
      <h2 class="text-xl font-medium mb-6 flex items-center gap-3">
        <span class="w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-500 rounded"></span>
        å¯ç”¨èµ„æº
      </h2>
      <div id="resources-container" class="space-y-3">
        <div class="flex items-center justify-center py-10 text-slate-500">
          <svg class="w-6 h-6 animate-spin mr-3" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
          </svg>
          æ­£åœ¨åŠ è½½èµ„æº...
        </div>
      </div>
    </section>

    <!-- HTTP æ–¹æ³• -->
    <section class="bg-white/5 border border-white/10 rounded-2xl p-8 mb-6 backdrop-blur">
      <h2 class="text-xl font-medium mb-6 flex items-center gap-3">
        <span class="w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-500 rounded"></span>
        æ”¯æŒçš„ HTTP æ–¹æ³•
      </h2>
      <div class="flex flex-wrap gap-3">
        <span class="px-4 py-2 bg-green-500/15 text-green-400 rounded-lg font-mono text-sm font-medium">GET</span>
        <span class="px-4 py-2 bg-blue-500/15 text-blue-400 rounded-lg font-mono text-sm font-medium">POST</span>
        <span class="px-4 py-2 bg-orange-500/15 text-orange-400 rounded-lg font-mono text-sm font-medium">PUT</span>
        <span class="px-4 py-2 bg-purple-500/15 text-purple-400 rounded-lg font-mono text-sm font-medium">PATCH</span>
        <span class="px-4 py-2 bg-red-500/15 text-red-400 rounded-lg font-mono text-sm font-medium">DELETE</span>
      </div>
    </section>

    <!-- ä½¿ç”¨ç¤ºä¾‹ -->
    <section class="bg-white/5 border border-white/10 rounded-2xl p-8 mb-6 backdrop-blur">
      <h2 class="text-xl font-medium mb-6 flex items-center gap-3">
        <span class="w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-500 rounded"></span>
        ä½¿ç”¨ç¤ºä¾‹
      </h2>
      <div id="examples-container" class="space-y-4">
        <div class="flex items-center justify-center py-10 text-slate-500">
          <svg class="w-6 h-6 animate-spin mr-3" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
          </svg>
          æ­£åœ¨åŠ è½½ç¤ºä¾‹...
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="text-center pt-8 text-slate-500 text-sm">
      åŸºäº <a href="https://github.com/typicode/json-server" target="_blank" class="text-blue-400 hover:underline">json-server</a> æ„å»º
    </footer>
  </div>

  <script>
    const iconMap = {
      users: 'ğŸ‘¥', posts: 'ğŸ“', comments: 'ğŸ’¬', products: 'ğŸ“¦', orders: 'ğŸ›’',
      categories: 'ğŸ“', tags: 'ğŸ·ï¸', articles: 'ğŸ“°', messages: 'âœ‰ï¸',
      notifications: 'ğŸ””', settings: 'âš™ï¸', profile: 'ğŸ‘¤', default: 'ğŸ“‹'
    };

    function getIcon(name) {
      const lower = name.toLowerCase();
      for (const [key, icon] of Object.entries(iconMap)) {
        if (lower.includes(key)) return icon;
      }
      return iconMap.default;
    }

    function getDesc(name, data) {
      if (Array.isArray(data)) return `${data.length} æ¡æ•°æ®`;
      if (typeof data === 'object' && data !== null) return 'å•ä¾‹èµ„æº';
      return 'èµ„æº';
    }

    function renderResources(db) {
      const container = document.getElementById('resources-container');
      const resources = Object.keys(db);
      
      if (!resources.length) {
        container.innerHTML = '<div class="text-center py-10 text-slate-500">æš‚æ— å¯ç”¨èµ„æº</div>';
        return;
      }

      container.innerHTML = resources.map(name => `
        <a href="/api/${name}" class="flex items-center justify-between p-4 bg-white/5 border border-white/5 rounded-xl hover:bg-blue-500/10 hover:border-blue-500/20 transition-all group">
          <div class="flex items-center gap-4">
            <div class="w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center text-lg">${getIcon(name)}</div>
            <div>
              <div class="font-medium text-slate-200">${name}</div>
              <div class="text-sm text-slate-500">${getDesc(name, db[name])}</div>
            </div>
          </div>
          <span class="px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg font-mono text-sm group-hover:bg-blue-500/20 transition-colors">/api/${name}</span>
        </a>
      `).join('');
    }

    function renderExamples(db) {
      const container = document.getElementById('examples-container');
      const resources = Object.keys(db);
      const res = resources.find(n => Array.isArray(db[n])) || resources[0];
      
      if (!res) {
        container.innerHTML = '<div class="text-center py-10 text-slate-500">æš‚æ— ç¤ºä¾‹</div>';
        return;
      }

      const isArr = Array.isArray(db[res]);
      const examples = [
        { title: `è·å–å…¨éƒ¨ ${res}`, method: 'GET', url: `/api/${res}` }
      ];

      if (isArr) {
        examples.push(
          { title: `è·å–å•ä¸ª ${res}`, method: 'GET', url: `/api/${res}/1` },
          { title: 'åˆ†é¡µæŸ¥è¯¢', method: 'GET', url: `/api/${res}?_page=1&_limit=10` },
          { title: 'æ’åºæŸ¥è¯¢', method: 'GET', url: `/api/${res}?_sort=id&_order=desc` },
          { title: 'åˆ›å»ºæ•°æ®', method: 'POST', url: `/api/${res}`, body: true },
          { title: 'æ›´æ–°æ•°æ®', method: 'PUT', url: `/api/${res}/1`, body: true },
          { title: 'éƒ¨åˆ†æ›´æ–°', method: 'PATCH', url: `/api/${res}/1`, body: true },
          { title: 'åˆ é™¤æ•°æ®', method: 'DELETE', url: `/api/${res}/1` }
        );
      }

      const methodColors = {
        GET: 'text-green-400', POST: 'text-blue-400', PUT: 'text-orange-400',
        PATCH: 'text-purple-400', DELETE: 'text-red-400'
      };

      container.innerHTML = examples.map(ex => `
        <div class="bg-slate-900 border border-white/10 rounded-xl overflow-hidden">
          <div class="px-4 py-3 bg-white/5 border-b border-white/5 text-xs text-slate-500 uppercase tracking-wider">${ex.title}</div>
          <pre class="p-4 font-mono text-sm overflow-x-auto"><span class="${methodColors[ex.method]}">${ex.method}</span> <span class="text-blue-400">${ex.url}</span>${ex.body ? `
<span class="text-slate-500">Content-Type: application/json</span>

{ ... }` : ''}</pre>
        </div>
      `).join('');
    }

    async function loadData() {
      try {
        const res = await fetch('/api/db');
        if (!res.ok) throw new Error('åŠ è½½å¤±è´¥');
        const db = await res.json();
        renderResources(db);
        renderExamples(db);
      } catch (e) {
        console.error('åŠ è½½æ•°æ®å¤±è´¥:', e);
        document.getElementById('resources-container').innerHTML = '<div class="text-center py-10 text-slate-500">åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•</div>';
        document.getElementById('examples-container').innerHTML = '<div class="text-center py-10 text-slate-500">åŠ è½½å¤±è´¥</div>';
      }
    }

    document.addEventListener('DOMContentLoaded', loadData);
  </script>
</body>
</html>
