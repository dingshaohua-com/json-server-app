<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Server API</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <style>
        [v-cloak] {
            display: none;
        }

        @keyframes pulse-dot {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .animate-pulse-dot {
            animation: pulse-dot 2s infinite;
        }
    </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-slate-200 font-sans">

    <div id="app" v-cloak>
        <!-- ËÉåÊôØË£ÖÈ•∞ -->
        <div class="fixed inset-0 pointer-events-none">
            <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"></div>
            <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"></div>
        </div>

        <div class="relative z-10 max-w-4xl mx-auto px-6 py-16">

            <!-- Header -->
            <header class="text-center mb-16">
                <div class="inline-flex items-center gap-3 mb-5">
                    <div
                        class="w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-2xl shadow-lg shadow-blue-500/30">
                        { }</div>
                    <h1
                        class="text-4xl font-bold bg-gradient-to-r from-white to-slate-400 bg-clip-text text-transparent">
                        JSON Server</h1>
                </div>
                <p class="text-slate-500 text-lg">Èõ∂‰ª£Á†Å ¬∑ Âø´ÈÄüÊê≠Âª∫ REST API Ê®°ÊãüÊúçÂä°Âô®</p>
                <div
                    class="inline-flex items-center gap-2 mt-6 px-4 py-2 bg-green-500/10 border border-green-500/30 text-green-400 rounded-full text-sm">
                    <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse-dot"></span>
                    ÊúçÂä°ËøêË°å‰∏≠
                </div>
            </header>

            <!-- ÂèØÁî®ËµÑÊ∫ê -->
            <section class="bg-white/5 border border-white/10 rounded-2xl p-8 mb-6 backdrop-blur">
                <h2 class="text-xl font-medium mb-6 flex items-center gap-3">
                    <span class="w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-500 rounded"></span>
                    ÂèØÁî®ËµÑÊ∫ê
                </h2>

                <!-- Âä†ËΩΩ‰∏≠ -->
                <div v-if="loading" class="flex items-center justify-center py-10 text-slate-500">
                    <svg class="w-6 h-6 animate-spin mr-3" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                        </circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z">
                        </path>
                    </svg>
                    Ê≠£Âú®Âä†ËΩΩËµÑÊ∫ê...
                </div>

                <!-- ÈîôËØØ -->
                <div v-else-if="error" class="text-center py-10 text-red-400">{{ error }}</div>

                <!-- ËµÑÊ∫êÂàóË°® -->
                <div v-else class="space-y-3">
                    <a v-for="(data, name) in db" :key="name" :href="'/api/' + name"
                        class="flex items-center justify-between p-4 bg-white/5 border border-white/5 rounded-xl hover:bg-blue-500/10 hover:border-blue-500/20 transition-all group">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center text-lg">{{
                                getIcon(name) }}</div>
                            <div>
                                <div class="font-medium text-slate-200">{{ name }}</div>
                                <div class="text-sm text-slate-500">{{ getDesc(data) }}</div>
                            </div>
                        </div>
                        <span
                            class="px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg font-mono text-sm group-hover:bg-blue-500/20 transition-colors">/api/{{
                            name }}</span>
                    </a>
                </div>
            </section>

            <!-- HTTP ÊñπÊ≥ï -->
            <section class="bg-white/5 border border-white/10 rounded-2xl p-8 mb-6 backdrop-blur">
                <h2 class="text-xl font-medium mb-6 flex items-center gap-3">
                    <span class="w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-500 rounded"></span>
                    ÊîØÊåÅÁöÑ HTTP ÊñπÊ≥ï
                </h2>
                <div class="flex flex-wrap gap-3">
                    <span v-for="m in methods" :key="m.name" :class="m.color"
                        class="px-4 py-2 rounded-lg font-mono text-sm font-medium">{{ m.name }}</span>
                </div>
            </section>

            <!-- ‰ΩøÁî®Á§∫‰æã -->
            <section class="bg-white/5 border border-white/10 rounded-2xl p-8 mb-6 backdrop-blur">
                <h2 class="text-xl font-medium mb-6 flex items-center gap-3">
                    <span class="w-1 h-6 bg-gradient-to-b from-blue-500 to-purple-500 rounded"></span>
                    ‰ΩøÁî®Á§∫‰æã
                </h2>

                <div v-if="loading" class="flex items-center justify-center py-10 text-slate-500">
                    <svg class="w-6 h-6 animate-spin mr-3" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                        </circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z">
                        </path>
                    </svg>
                    Ê≠£Âú®Âä†ËΩΩ...
                </div>

                <div v-else class="space-y-4">
                    <div v-for="ex in examples" :key="ex.title"
                        class="bg-slate-900 border border-white/10 rounded-xl overflow-hidden">
                        <div
                            class="px-4 py-3 bg-white/5 border-b border-white/5 text-xs text-slate-500 uppercase tracking-wider">
                            {{ ex.title }}</div>
                        <pre class="p-4 font-mono text-sm overflow-x-auto"><span :class="methodColors[ex.method]">{{ ex.method }}</span> <span class="text-blue-400">{{ ex.url }}</span><template v-if="ex.body">
<span class="text-slate-500">Content-Type: application/json</span>

{ ... }</template></pre>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="text-center pt-8 text-slate-500 text-sm">
                Âü∫‰∫é <a href="https://github.com/typicode/json-server" target="_blank"
                    class="text-blue-400 hover:underline">json-server</a> ÊûÑÂª∫
            </footer>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue

        createApp({
            setup() {
                const db = ref({})
                const loading = ref(true)
                const error = ref(null)

                const iconMap = {
                    users: 'üë•', posts: 'üìù', comments: 'üí¨', products: 'üì¶', orders: 'üõí',
                    categories: 'üìÅ', tags: 'üè∑Ô∏è', articles: 'üì∞', messages: '‚úâÔ∏è',
                    notifications: 'üîî', settings: '‚öôÔ∏è', profile: 'üë§'
                }

                const methods = [
                    { name: 'GET', color: 'bg-green-500/15 text-green-400' },
                    { name: 'POST', color: 'bg-blue-500/15 text-blue-400' },
                    { name: 'PUT', color: 'bg-orange-500/15 text-orange-400' },
                    { name: 'PATCH', color: 'bg-purple-500/15 text-purple-400' },
                    { name: 'DELETE', color: 'bg-red-500/15 text-red-400' }
                ]

                const methodColors = {
                    GET: 'text-green-400', POST: 'text-blue-400', PUT: 'text-orange-400',
                    PATCH: 'text-purple-400', DELETE: 'text-red-400'
                }

                const getIcon = (name) => {
                    const lower = name.toLowerCase()
                    for (const [key, icon] of Object.entries(iconMap)) {
                        if (lower.includes(key)) return icon
                    }
                    return 'üìã'
                }

                const getDesc = (data) => {
                    if (Array.isArray(data)) return `${data.length} Êù°Êï∞ÊçÆ`
                    if (typeof data === 'object' && data !== null) return 'Âçï‰æãËµÑÊ∫ê'
                    return 'ËµÑÊ∫ê'
                }

                const firstArrayResource = computed(() => {
                    for (const [name, data] of Object.entries(db.value)) {
                        if (Array.isArray(data)) return name
                    }
                    return Object.keys(db.value)[0] || 'items'
                })

                const examples = computed(() => {
                    const res = firstArrayResource.value
                    if (!res) return []

                    const isArr = Array.isArray(db.value[res])
                    const list = [{ title: `Ëé∑ÂèñÂÖ®ÈÉ® ${res}`, method: 'GET', url: `/api/${res}` }]

                    if (isArr) {
                        list.push(
                            { title: `Ëé∑ÂèñÂçï‰∏™ ${res}`, method: 'GET', url: `/api/${res}/1` },
                            { title: 'ÂàÜÈ°µÊü•ËØ¢', method: 'GET', url: `/api/${res}?_page=1&_limit=10` },
                            { title: 'ÊéíÂ∫èÊü•ËØ¢', method: 'GET', url: `/api/${res}?_sort=id&_order=desc` },
                            { title: 'ÂàõÂª∫Êï∞ÊçÆ', method: 'POST', url: `/api/${res}`, body: true },
                            { title: 'Êõ¥Êñ∞Êï∞ÊçÆ', method: 'PUT', url: `/api/${res}/1`, body: true },
                            { title: 'ÈÉ®ÂàÜÊõ¥Êñ∞', method: 'PATCH', url: `/api/${res}/1`, body: true },
                            { title: 'Âà†Èô§Êï∞ÊçÆ', method: 'DELETE', url: `/api/${res}/1` }
                        )
                    }
                    return list
                })

                onMounted(async () => {
                    try {
                        const res = await fetch('/api/db')
                        if (!res.ok) throw new Error('ËØ∑Ê±ÇÂ§±Ë¥•')
                        db.value = await res.json()
                    } catch (e) {
                        error.value = 'Âä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Âà∑Êñ∞ÈáçËØï'
                        console.error(e)
                    } finally {
                        loading.value = false
                    }
                })

                return { db, loading, error, methods, methodColors, examples, getIcon, getDesc }
            }
        }).mount('#app')
    </script>
</body>

</html>